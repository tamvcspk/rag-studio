<div class="rt-TabNav">
  <!-- Tab List using shared navigation styles -->
  <div [class]="navListClasses()" role="tablist">
    @for (tabPanel of tabPanelsSignal(); track trackByTabId($index, tabPanel)) {
      <button
        [class]="getTabClasses(tabPanel, $index)"
        role="tab"
        [attr.aria-selected]="isTabActive($index)"
        [attr.aria-disabled]="tabPanel.disabled()"
        [disabled]="tabPanel.disabled() || disabled()"
        (click)="onTabClick($index)"
      >
        @if (tabPanel.icon()) {
          <rag-icon
            [img]="tabPanel.icon()"
            size="sm"
          ></rag-icon>
        }
        <span class="rt-TabNavItem__label">{{ tabPanel.label() }}</span>
      </button>
    } @empty {
      <div class="rt-TabNavEmpty" role="alert">
        No tab panels available
      </div>
    }
  </div>

  <!-- Tab Panels Container -->
  <div class="rt-TabPanels" #tabPanelsContainer>
    @for (tabPanel of tabPanelsSignal(); track trackByTabId($index, tabPanel)) {
      <div 
        [class]="getTabPanelClasses($index)"
        role="tabpanel"
        [attr.aria-labelledby]="'tab-' + tabPanel.id()"
        [attr.aria-hidden]="!isTabPanelVisible($index)"
        [attr.tabindex]="isTabPanelVisible($index) ? 0 : -1">
        <ng-container 
          [ngTemplateOutlet]="tabPanel.template">
        </ng-container>
      </div>
    }
  </div>

  <!-- Fallback content when no panels are provided -->
  @if (tabPanelsSignal().length === 0) {
    <div class="rt-TabContent">
      <ng-content></ng-content>
    </div>
  }
</div>
