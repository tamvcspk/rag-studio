// RagDialog - Semantic Overlay Component
.rt-Dialog {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  width: 100vw;
  height: 100vh;
  max-width: none;
  max-height: none;
  margin: 0;
  padding: 0;
  border: none;
  background: transparent;
  z-index: 50;
  
  // Hide by default
  opacity: 0;
  pointer-events: none;
  transform: scale(0.95);
  transition: all 0.15s ease-out;

  // Show when open
  &.rt-open {
    opacity: 1;
    pointer-events: auto;
    transform: scale(1);
    
    .rt-DialogContent {
      transform: translate(-50%, -50%) scale(1);
      opacity: 1;
    }
  }

  &.rt-animating {
    .rt-DialogContent {
      transition: all 0.15s ease-out;
    }
  }

  // Size variants
  &.rt-size-sm .rt-DialogContent {
    width: 90vw;
    max-width: 400px;
  }

  &.rt-size-md .rt-DialogContent {
    width: 90vw;
    max-width: 500px;
  }

  &.rt-size-lg .rt-DialogContent {
    width: 90vw;
    max-width: 700px;
  }

  &.rt-size-xl .rt-DialogContent {
    width: 90vw;
    max-width: 900px;
  }

  &.rt-size-full .rt-DialogContent {
    width: 95vw;
    height: 95vh;
    max-width: none;
    max-height: none;
  }

  // Backdrop filter for modern browsers
  @supports (backdrop-filter: blur(4px)) {
    backdrop-filter: blur(4px);
  }
}

.rt-DialogOverlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: var(--rag-semantic-component-dialog-backdrop-background);
  backdrop-filter: var(--rag-semantic-component-dialog-backdrop-backdropFilter);
  animation: overlayShow 0.15s ease-out;
}

.rt-DialogContent {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%) scale(0.95);
  background: var(--rag-semantic-component-dialog-container-background);
  border-radius: var(--rag-semantic-component-dialog-container-borderRadius);
  box-shadow: var(--rag-semantic-component-dialog-container-boxShadow);
  border: var(--rag-semantic-component-dialog-container-border);
  max-height: 85vh;
  opacity: 0;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  animation: contentShow 0.15s ease-out;

  // Size-specific styles
  &.rt-size-sm {
    padding: var(--rag-primitive-spacing-lg);
  }

  &.rt-size-md {
    padding: var(--rag-primitive-spacing-xl);
  }

  &.rt-size-lg {
    padding: var(--rag-primitive-spacing-xl);
  }

  &.rt-size-xl {
    padding: var(--rag-primitive-spacing-xl);
  }

  &.rt-size-full {
    padding: var(--rag-primitive-spacing-xl);
    border-radius: var(--rag-primitive-radius-md);
  }
}

.rt-DialogHeader {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  padding: var(--rag-semantic-component-dialog-header-padding);
  border-bottom: var(--rag-semantic-component-dialog-header-borderBottom);
  gap: var(--rag-primitive-spacing-lg);
}

.rt-DialogTitle {
  font-size: var(--rag-primitive-fontSize-xl);
  font-weight: 600;
  line-height: var(--rag-primitive-lineHeight-xl);
  color: var(--rag-semantic-color-text-default);
  margin: 0;
  flex: 1;
}

.rt-DialogDescription {
  color: var(--rag-semantic-color-text-subtle);
  font-size: var(--rag-primitive-fontSize-sm);
  line-height: var(--rag-primitive-lineHeight-md);
  margin: 0 0 var(--rag-primitive-spacing-xl) 0;
}

.rt-DialogCloseButton {
  display: flex;
  align-items: center;
  justify-content: center;
  width: var(--rag-primitive-fontSize-lg);
  height: var(--rag-primitive-fontSize-lg);
  border: none;
  background: none;
  border-radius: var(--rag-primitive-radius-sm);
  color: var(--rag-semantic-color-text-muted);
  cursor: pointer;
  transition: all 0.15s;
  flex-shrink: 0;
  outline: none;

  &:hover {
    background-color: var(--rag-semantic-color-background-muted);
    color: var(--rag-semantic-color-text-default);
  }

  &:focus-visible {
    box-shadow: 0 0 0 2px var(--rag-semantic-color-primary-700);
  }

  rag-icon {
    flex-shrink: 0;
  }
}

.rt-DialogBody {
  flex: 1;
  overflow-y: auto;
  padding: var(--rag-semantic-component-dialog-content-padding);

  &:last-child {
    margin-bottom: 0;
  }
}

.rt-DialogFooter {
  display: flex;
  align-items: center;
  justify-content: flex-end;
  gap: var(--rag-primitive-spacing-md);
  padding: var(--rag-semantic-component-dialog-footer-padding);
  border-top: var(--rag-semantic-component-dialog-footer-borderTop);
  margin-top: auto;
  
  &:empty {
    display: none;
  }
}

// Animations
@keyframes overlayShow {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes contentShow {
  from {
    opacity: 0;
    transform: translate(-50%, -50%) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
  }
}

// Responsive behavior
@media (max-width: 768px) {
  .rt-Dialog {
    &.rt-size-sm .rt-DialogContent,
    &.rt-size-md .rt-DialogContent,
    &.rt-size-lg .rt-DialogContent,
    &.rt-size-xl .rt-DialogContent {
      width: 95vw;
      max-width: none;
      top: 10%;
      bottom: 10%;
      left: 2.5%;
      right: 2.5%;
      height: auto;
      max-height: 80vh;
      transform: none;
    }

    &.rt-size-full .rt-DialogContent {
      width: 100vw;
      height: 100vh;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      border-radius: 0;
      transform: none;
    }
  }

  .rt-DialogContent {
    padding: var(--rag-primitive-spacing-lg);
  }

  .rt-DialogHeader {
    margin-bottom: var(--rag-primitive-spacing-md);
  }

  .rt-DialogTitle {
    font-size: var(--rag-primitive-fontSize-lg);
  }
}

// Dark mode support
@media (prefers-color-scheme: dark) {
  .rt-DialogContent {
    background-color: var(--rag-semantic-color-background-default);
    border: 1px solid var(--rag-semantic-color-border-subtle);
  }

  .rt-DialogTitle {
    color: var(--rag-semantic-color-text-default);
  }

  .rt-DialogDescription {
    color: var(--rag-semantic-color-text-subtle);
  }

  .rt-DialogCloseButton {
    color: var(--rag-semantic-color-text-muted);

    &:hover {
      background-color: var(--rag-semantic-color-background-muted);
      color: var(--rag-semantic-color-text-default);
    }
  }
}

// Focus management
.rt-Dialog[open] {
  .rt-DialogContent {
    // Ensure dialog content can receive focus
    outline: none;
  }

  // Focus trap styles
  .rt-DialogCloseButton {
    // Ensure close button is focusable
    &:focus-visible {
      box-shadow: 0 0 0 2px var(--rag-semantic-color-primary-700);
    }
  }
}

// High contrast mode support
@media (prefers-contrast: high) {
  .rt-DialogContent {
    border: 2px solid;
  }

  .rt-DialogCloseButton {
    border: 1px solid;
    
    &:hover {
      background-color: Highlight;
      color: HighlightText;
    }
  }
}