// Design tokens are globally available via _design-tokens.scss in styles

.rag-file-input {
  display: flex;
  flex-direction: column;
  gap: var(--rag-primitive-spacing-sm);
  width: 100%;

  // Error alert styling
  .file-input-error {
    margin-bottom: var(--rag-primitive-spacing-sm);
  }

  // Hidden file input
  .file-input-hidden {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }

  // Main drop zone
  .file-input-zone {
    position: relative;
    border: 2px dashed var(--rag-semantic-color-border-default);
    border-radius: var(--rag-primitive-radius-md);
    background: var(--rag-semantic-color-background-default);
    transition: all var(--rag-primitive-duration-fast) ease;
    cursor: pointer;

    &:hover:not(.rag-file-input--disabled *) {
      border-color: var(--rag-semantic-color-border-default);
      background: var(--rag-semantic-color-background-subtle);
    }

    &:focus-within {
      outline: 2px solid var(--rag-semantic-color-primary-500);
      outline-offset: 2px;
    }

    &.drag-drop-enabled {
      &:hover {
        border-color: var(--rag-semantic-color-primary-500);
      }
    }
  }

  .file-input-content {
    padding: var(--rag-primitive-spacing-lg);
  }

  // Empty state
  .file-input-empty {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--rag-primitive-spacing-md);
    text-align: center;

    .upload-icon {
      color: var(--rag-semantic-color-text-subtle);
      font-size: var(--rag-primitive-fontSize-2xl);
    }

    .file-input-text {
      display: flex;
      flex-direction: column;
      gap: var(--rag-primitive-spacing-xs);

      .placeholder {
        font-size: var(--rag-primitive-fontSize-sm);
        font-weight: var(--rag-primitive-fontWeight-medium);
        color: var(--rag-semantic-color-text-default);
      }

      .drag-hint {
        font-size: var(--rag-primitive-fontSize-xs);
        color: var(--rag-semantic-color-text-subtle);
      }
    }
  }

  // Selected files state
  .file-input-selected {
    display: flex;
    align-items: center;
    gap: var(--rag-primitive-spacing-sm);
    padding: var(--rag-primitive-spacing-sm);
    background: var(--rag-semantic-color-background-subtle);
    border-radius: var(--rag-primitive-radius-sm);

    .file-icon {
      color: var(--rag-semantic-color-primary-500);
    }

    .file-summary {
      flex: 1;
      font-size: var(--rag-primitive-fontSize-sm);
      font-weight: var(--rag-primitive-fontWeight-medium);
      color: var(--rag-semantic-color-text-default);
    }

    .clear-button {
      display: flex;
      align-items: center;
      justify-content: center;
      width: var(--rag-primitive-spacing-lg);
      height: var(--rag-primitive-spacing-lg);
      border: none;
      background: transparent;
      border-radius: var(--rag-primitive-radius-sm);
      color: var(--rag-semantic-color-text-subtle);
      cursor: pointer;
      transition: all var(--rag-primitive-duration-fast) ease;

      &:hover:not(:disabled) {
        background: var(--rag-semantic-color-background-subtle);
        color: var(--rag-semantic-color-text-default);
      }

      &:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }
    }
  }

  // File list
  .file-list {
    display: flex;
    flex-direction: column;
    gap: var(--rag-primitive-spacing-xs);
    padding: var(--rag-primitive-spacing-sm);
    background: var(--rag-semantic-color-background-subtle);
    border-radius: var(--rag-primitive-radius-sm);
    border: 1px solid var(--rag-semantic-color-border-subtle);

    .file-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: var(--rag-primitive-spacing-sm);
      background: var(--rag-semantic-color-background-default);
      border-radius: var(--rag-primitive-radius-sm);
      border: 1px solid var(--rag-semantic-color-border-subtle);

      .file-info {
        display: flex;
        align-items: center;
        gap: var(--rag-primitive-spacing-sm);
        flex: 1;

        .file-item-icon {
          color: var(--rag-semantic-color-text-subtle);
        }

        .file-details {
          display: flex;
          flex-direction: column;
          gap: 2px;

          .file-name {
            font-size: var(--rag-primitive-fontSize-sm);
            font-weight: var(--rag-primitive-fontWeight-medium);
            color: var(--rag-semantic-color-text-default);
            word-break: break-all;
          }

          .file-size {
            font-size: var(--rag-primitive-fontSize-xs);
            color: var(--rag-semantic-color-text-subtle);
          }
        }
      }

      .remove-file-button {
        display: flex;
        align-items: center;
        justify-content: center;
        width: var(--rag-primitive-spacing-md);
        height: var(--rag-primitive-spacing-md);
        border: none;
        background: transparent;
        border-radius: var(--rag-primitive-radius-sm);
        color: var(--rag-semantic-color-text-subtle);
        cursor: pointer;
        transition: all var(--rag-primitive-duration-fast) ease;

        &:hover:not(:disabled) {
          background: var(--rag-semantic-color-danger-100);
          color: var(--rag-semantic-color-danger-700);
        }

        &:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }
      }
    }
  }

  // Size variants
  &--sm {
    .file-input-zone {
      .file-input-content {
        padding: var(--rag-primitive-spacing-md);
      }
    }

    .file-input-empty {
      .upload-icon {
        font-size: var(--rag-primitive-fontSize-xl);
      }

      .placeholder {
        font-size: var(--rag-primitive-fontSize-xs);
      }

      .drag-hint {
        font-size: var(--rag-primitive-fontSize-2xs);
      }
    }
  }

  &--lg {
    .file-input-zone {
      .file-input-content {
        padding: var(--rag-primitive-spacing-xl);
      }
    }

    .file-input-empty {
      .upload-icon {
        font-size: var(--rag-primitive-fontSize-3xl);
      }

      .placeholder {
        font-size: var(--rag-primitive-fontSize-md);
      }

      .drag-hint {
        font-size: var(--rag-primitive-fontSize-sm);
      }
    }
  }

  // Variant styles
  &--solid {
    .file-input-zone {
      border-style: solid;
      background: var(--rag-semantic-color-background-subtle);
    }
  }

  &--dashed {
    .file-input-zone {
      border-style: dashed;
    }
  }

  // State styles
  &--disabled {
    opacity: 0.6;
    pointer-events: none;

    .file-input-zone {
      cursor: not-allowed;
      background: var(--rag-semantic-color-background-muted);
      border-color: var(--rag-semantic-color-border-subtle);
    }
  }

  &--drag-over {
    .file-input-zone {
      border-color: var(--rag-semantic-color-primary-500);
      background: var(--rag-semantic-color-primary-50);
      transform: scale(1.02);
    }
  }

  &--error {
    .file-input-zone {
      border-color: var(--rag-semantic-color-danger-500);
    }
  }

  &--has-files {
    .file-input-zone {
      border-color: var(--rag-semantic-color-success-500);
      background: var(--rag-semantic-color-success-50);
    }
  }
}

// Dark mode support
:global(.dark) {
  .rag-file-input {
    &--drag-over {
      .file-input-zone {
        background: var(--rag-semantic-color-primary-900);
      }
    }

    &--has-files {
      .file-input-zone {
        background: var(--rag-semantic-color-success-900);
      }
    }
  }
}