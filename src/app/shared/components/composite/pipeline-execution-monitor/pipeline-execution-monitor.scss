
.execution-monitor {
  .monitor-header {
    display: flex;
    align-items: center;
    gap: var(--rag-primitive-spacing-xl);
    padding: var(--rag-primitive-spacing-xl);
    cursor: pointer;
    transition: background-color 0.15s ease;

    &:hover {
      background: var(--rag-semantic-color-background-subtle);
    }
  }

  .execution-info {
    flex: 1;
    min-width: 0;

    .execution-title {
      display: flex;
      align-items: center;
      gap: var(--rag-primitive-spacing-sm);
      margin-bottom: var(--rag-primitive-spacing-sm);

      .status-icon {
        &.blue { color: var(--rag-semantic-color-primary-500); }
        &.green { color: var(--rag-semantic-color-success-500); }
        &.red { color: var(--rag-semantic-color-danger-500); }
        &.amber { color: var(--rag-semantic-color-warning-500); }
        &.gray { color: var(--rag-semantic-color-text-subtle); }
      }

      .run-id {
        font-weight: var(--rag-primitive-fontWeight-semibold);
        color: var(--rag-semantic-color-text-default);
        font-size: var(--rag-primitive-fontSize-sm);
      }
    }

    .execution-details {
      display: flex;
      flex-wrap: wrap;
      gap: var(--rag-primitive-spacing-lg);
      font-size: var(--rag-primitive-fontSize-xs);
      color: var(--rag-semantic-color-text-subtle);

      .start-time,
      .end-time,
      .duration,
      .eta {
        white-space: nowrap;
      }

      .eta {
        color: var(--rag-semantic-color-primary-500);
        font-weight: var(--rag-primitive-fontWeight-medium);
      }
    }
  }

  .execution-progress {
    display: flex;
    flex-direction: column;
    gap: var(--rag-primitive-spacing-sm);
    min-width: 200px;

    .progress-info {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: var(--rag-primitive-fontSize-xs);
      color: var(--rag-semantic-color-text-subtle);

      .progress-percentage {
        font-weight: var(--rag-primitive-fontWeight-semibold);
        color: var(--rag-semantic-color-text-default);
      }
    }

    .records-info {
      display: flex;
      align-items: center;
      gap: var(--rag-primitive-spacing-xs);
      font-size: var(--rag-primitive-fontSize-xs);
      color: var(--rag-semantic-color-text-subtle);
    }
  }

  .execution-actions {
    display: flex;
    align-items: center;
    gap: var(--rag-primitive-spacing-sm);

    .expand-toggle {
      background: none;
      border: none;
      cursor: pointer;
      padding: var(--rag-primitive-spacing-xs);
      border-radius: var(--rag-primitive-radius-md);
      color: var(--rag-semantic-color-text-subtle);
      transition: all 0.15s ease;

      &:hover {
        background: var(--rag-semantic-color-background-muted);
        color: var(--rag-semantic-color-text-default);
      }
    }
  }

  .monitor-details {
    border-top: 1px solid var(--rag-semantic-color-border-default);
    padding: var(--rag-primitive-spacing-xl);
    background: var(--rag-semantic-color-background-muted);

    h4 {
      margin: 0 0 var(--rag-primitive-spacing-lg) 0;
      font-size: var(--rag-primitive-fontSize-sm);
      font-weight: var(--rag-primitive-fontWeight-semibold);
      color: var(--rag-semantic-color-text-default);
    }
  }

  .steps-section {
    margin-bottom: 1.5rem;

    .steps-list {
      display: flex;
      flex-direction: column;
      gap: var(--rag-primitive-spacing-sm);
    }

    .step-item {
      background: var(--rag-semantic-color-background-default);
      border-radius: var(--rag-primitive-radius-md);
      border: 1px solid var(--rag-semantic-color-border-default);
      padding: var(--rag-primitive-spacing-lg);
      transition: all 0.15s ease;

      &.status-running {
        border-left: 4px solid var(--rag-semantic-color-primary-500);
      }

      &.status-completed {
        border-left: 4px solid var(--rag-semantic-color-success-500);
      }

      &.status-failed {
        border-left: 4px solid var(--rag-semantic-color-danger-500);
      }

      &.status-pending {
        border-left: 4px solid var(--rag-semantic-color-warning-500);
      }

      .step-header {
        display: flex;
        align-items: center;
        gap: var(--rag-primitive-spacing-sm);
        margin-bottom: var(--rag-primitive-spacing-sm);

        .step-status-icon {
          &.blue { color: var(--rag-semantic-color-primary-500); }
          &.green { color: var(--rag-semantic-color-success-500); }
          &.red { color: var(--rag-semantic-color-danger-500); }
          &.amber { color: var(--rag-semantic-color-warning-500); }
          &.gray { color: var(--rag-semantic-color-text-subtle); }
        }

        .step-name {
          flex: 1;
          font-weight: var(--rag-primitive-fontWeight-medium);
          color: var(--rag-semantic-color-text-default);
          font-size: var(--rag-primitive-fontSize-sm);
        }
      }

      .step-details {
        display: flex;
        gap: var(--rag-primitive-spacing-lg);
        font-size: var(--rag-primitive-fontSize-xs);
        color: var(--rag-semantic-color-text-subtle);

        .step-duration,
        .step-records,
        .step-retries {
          white-space: nowrap;
        }

        .step-retries {
          color: var(--rag-semantic-color-warning-500);
        }
      }

      .step-error {
        margin-top: var(--rag-primitive-spacing-sm);
        display: flex;
        align-items: center;
        gap: var(--rag-primitive-spacing-sm);
        padding: var(--rag-primitive-spacing-sm);
        background: var(--rag-semantic-color-danger-100);
        border-radius: var(--rag-primitive-radius-sm);
        font-size: var(--rag-primitive-fontSize-xs);
        color: var(--rag-semantic-color-danger-500);
      }
    }
  }

  .metrics-section {
    margin-bottom: 1.5rem;

    .metrics-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: var(--rag-primitive-spacing-lg);

      .metric-item {
        background: var(--rag-semantic-color-background-default);
        border-radius: var(--rag-primitive-radius-md);
        padding: var(--rag-primitive-spacing-lg);
        border: 1px solid var(--rag-semantic-color-border-default);

        label {
          display: block;
          font-size: var(--rag-primitive-fontSize-xs);
          font-weight: var(--rag-primitive-fontWeight-medium);
          color: var(--rag-semantic-color-text-subtle);
          margin-bottom: var(--rag-primitive-spacing-xs);
          text-transform: uppercase;
          letter-spacing: 0.05em;
        }

        span {
          font-size: var(--rag-primitive-fontSize-sm);
          color: var(--rag-semantic-color-text-default);
          word-break: break-all;
        }
      }
    }
  }

  .warnings-section {
    margin-bottom: 1.5rem;

    .warnings-list {
      display: flex;
      flex-direction: column;
      gap: var(--rag-primitive-spacing-sm);

      .warning-item {
        display: flex;
        align-items: center;
        gap: var(--rag-primitive-spacing-sm);
        padding: var(--rag-primitive-spacing-sm);
        background: var(--rag-semantic-color-warning-100);
        border-radius: var(--rag-primitive-radius-sm);
        border-left: 4px solid var(--rag-semantic-color-warning-500);
        font-size: var(--rag-primitive-fontSize-sm);
        color: var(--rag-semantic-color-warning-700);

        .warning-icon {
          color: var(--rag-semantic-color-warning-500);
          flex-shrink: 0;
        }
      }
    }
  }

  .error-section {
    .error-message {
      display: flex;
      align-items: center;
      gap: var(--rag-primitive-spacing-sm);
      padding: var(--rag-primitive-spacing-lg);
      background: var(--rag-semantic-color-danger-100);
      border-radius: var(--rag-primitive-radius-md);
      border-left: 4px solid var(--rag-semantic-color-danger-500);
      font-size: var(--rag-primitive-fontSize-sm);
      color: var(--rag-semantic-color-danger-700);

      .error-icon {
        color: var(--rag-semantic-color-danger-500);
        flex-shrink: 0;
      }
    }
  }
}

// Responsive adjustments
@media (max-width: 768px) {
  .execution-monitor {
    .monitor-header {
      flex-direction: column;
      align-items: stretch;
      gap: var(--rag-primitive-spacing-lg);
    }

    .execution-progress {
      min-width: auto;
    }

    .execution-actions {
      justify-content: flex-end;
    }

    .metrics-grid {
      grid-template-columns: 1fr;
    }
  }
}

// Animations
@keyframes pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.6;
  }
}

.status-running .step-status-icon,
.status-running .status-icon {
  animation: pulse 2s infinite;
}