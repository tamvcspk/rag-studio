<div class="pipelines-page">
  <div class="sticky-header">
    <!-- Page Header with Search -->
    <rag-page-header [title]="'Processing Pipelines'"
      [description]="'Automated workflows for data ingestion and indexing'" [icon]="WorkflowIcon"
      [actions]="headerActions()" [showSearch]="true"
      [searchPlaceholder]="'Search pipelines by name, description, or status...'" [searchValue]="searchQuery()"
      (searchChange)="onSearchChange($event)" (searchClear)="onSearchClear()" size="lg">
    </rag-page-header>

    <!-- Statistics Overview -->
    <rag-stats-overview [stats]="pipelineStatsItems()" [loading]="isLoading()" (filterChange)="onFilterChange($event)">
    </rag-stats-overview>
  </div>

  <!-- Pipelines Content -->
  <div class="pipelines-content">
    @if (filteredPipelines().length === 0 && searchQuery() === '' && selectedFilters().length === 0) {
    <!-- Empty state - no pipelines created yet -->
    <div class="empty-state">
      <rag-icon [img]="WorkflowIcon" size="xl" class="empty-icon" />
      <h3 class="empty-title">No pipelines created yet</h3>
      <p class="empty-description">
        Pipelines automate data ingestion, processing, and indexing workflows. Create your first one to get started.
      </p>
      <rag-button variant="solid" size="md" (click)="onCreatePipeline()">
        <rag-icon [img]="PlusIcon" size="sm" />
        Create Your First Pipeline
      </rag-button>
    </div>
    } @else if (filteredPipelines().length === 0) {
    <!-- No results for current filters -->
    <div class="no-results">
      <rag-icon [img]="SearchIcon" size="xl" class="no-results-icon" />
      <h3 class="no-results-title">No pipelines found</h3>
      <p class="no-results-description">
        Try adjusting your search or filter criteria
      </p>
      <div class="no-results-actions">
        <rag-button variant="outline" size="sm" (click)="searchQuery.set(''); selectedFilters.set([])">
          Clear Filters
        </rag-button>
      </div>
    </div>
    } @else {
    <!-- Pipelines Grid -->
    <div class="pipelines-grid">
      @for (pipeline of filteredPipelines(); track pipeline.id) {
      <rag-pipeline-card [pipeline]="pipeline" [loading]="isLoading()" (onPause)="onPipelinePause($event)"
        (onPlay)="onPipelinePlay($event)" (onEdit)="onPipelineEdit($event)" (onSchedule)="onPipelineSchedule($event)"
        (onRunNow)="onPipelineRunNow($event)">
      </rag-pipeline-card>
      } @empty {
      <div class="no-pipelines-message">
        <p>No pipelines available</p>
      </div>
      }
    </div>
    }
  </div>

</div>